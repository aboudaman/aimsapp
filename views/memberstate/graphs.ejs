<div id="chart" style="max-width:650px;margin: 25px;"></div>

<script>

let dataArray = []
let countryArray = []
let url=`http://localhost:4500/graphsapi`
 fetch(url)
	.then(response => response.json())
        .then((result) => {
	console.log(result)
		result.members.forEach(d => {
			dataArray.push(d.population)
			countryArray.push(d.countryName)
			console.log(`${d.countryName} : ${d.population}`)
		})
        })
	.then(() => {

console.log(`Number of items in population ${dataArray.length}`)
var options = {
  chart: {
  //Can change the type to line, bar
    type: 'bar'
  },
  series: [{
    name: 'population',
    //data: [30,40,35,50,49,60,70,91,350]
    data: dataArray
  }],
  xaxis: {
    //categories: [1996,1997,1998,1999, 2000]
    categories: countryArray
  }
}

var chart = new ApexCharts(document.querySelector("#chart"), options);

chart.render();


	})
        .catch(error => console.log("error"))

</script>
